<%= render partial: "filters", locals: {q: @q} %>

<table class="backoffice-table">
  <thead>
    <tr>
      <th>
        <%= sort_link @q, :account_name, t("backoffice.common.name") %>
      </th>
      <th>
        <%= sort_link @q, :account_owner_full_name, t("backoffice.common.account_owner") %>
      </th>
      <th>
        <%= sort_link @q, :account_users_count, t("backoffice.common.account_users") %>
      </th>
      <th>
        <%= sort_link @q, :projects_count, t(".projects") %>
      </th>
      <th>
        <%= sort_link @q, :language, t("backoffice.common.language") %>
      </th>
      <th>
        <%= sort_link @q, :account_review_status, t("backoffice.common.status") %>
      </th>
      <th>
      </th>
      <th>
      </th>
    </tr>
  </thead>
  <tbody>
    <% @project_developers.each do |pd| %>
      <tr>
        <td><%= pd.name %></td>
        <td><%= pd.account.owner.full_name %></td>
        <td><%= pd.account.users_count %></td>
        <td><%= pd.projects_count %></td>
        <td><%= pd.language %></td>
        <td><%= pd.account.review_status %></td>
        <td><%= link_to t("backoffice.common.edit"), edit_backoffice_project_developer_path(pd.id), class: "link-button" %></td>
        <td>
          <%= button_to t("backoffice.common.approve"), approve_backoffice_account_path(pd.account.id), class: "link-button", method: :post unless pd.account.approved? %>
          <%= button_to t("backoffice.common.reject"), reject_backoffice_account_path(pd.account.id), class: "link-button", method: :post unless pd.account.rejected? %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>
