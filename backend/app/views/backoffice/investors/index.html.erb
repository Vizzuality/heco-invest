<%= render "backoffice/shared/filters", q: @q do |f| %>
  <%= render partial: "backoffice/shared/full_text_filter", locals: { f: f } %>
  <div class="w-30 inline-block mx-3">
    <%= f.input :account_review_status_eq, as: :select, required: false, label: false, prompt: I18n.t("backoffice.common.status"),
                collection: Account.review_statuses.map { |k, v| [I18n.t("activerecord.attributes.account.review_statuses.#{k}"), v] } %>
  </div>
<% end %>

<table class="backoffice-table">
  <thead>
    <tr>
      <th>
        <%= sort_link @q, :account_name, t("backoffice.common.name") %>
      </th>
      <th>
        <%= sort_link @q, :account_owner_full_name, t("backoffice.common.account_owner") %>
      </th>
      <th>
        <%= sort_link @q, :account_users_count, t("backoffice.common.account_users") %>
      </th>
      <th>
        <%= sort_link @q, :open_calls_count, t(".open_calls") %>
      </th>
      <th>
        <%= sort_link @q, :language, t("backoffice.common.language") %>
      </th>
      <th>
        <%= sort_link @q, :account_review_status, t("backoffice.common.status") %>
      </th>
      <th>
      </th>
    </tr>
  </thead>
  <tbody>
    <% @investors.each do |investor| %>
      <tr>
        <td><%= investor.name %></td>
        <td><%= investor.account.owner.full_name %></td>
        <td><%= investor.account.users_count %></td>
        <td><%= investor.open_calls_count %></td>
        <td><%= investor.language %></td>
        <td><%= investor.account.review_status %></td>
        <td>
          <%= button_to t("backoffice.common.approve"), approve_backoffice_account_path(investor.account.id), class: "link-button", method: :post unless investor.account.approved? %>
          <%= button_to t("backoffice.common.reject"), reject_backoffice_account_path(investor.account.id), class: "link-button", method: :post unless investor.account.rejected? %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>
